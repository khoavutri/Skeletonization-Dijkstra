!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.khoadev=r():t.khoadev=r()}(self,(()=>(()=>{"use strict";var t=function(t,r){this.x=t,this.y=r},r=function(){function r(t,r,a){var e=this;this.toWhite=[],this.nbrs=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],this.nbrGroups=[[[0,2,4],[2,4,6]],[[0,2,6],[0,4,6]]],this.data=function(){for(var t=new Uint8ClampedArray(4*e.grayscalePixelData.length),r=0;r<e.grayscalePixelData.length;r++)t[4*r]=e.grayscalePixelData[r],t[4*r+1]=e.grayscalePixelData[r],t[4*r+2]=e.grayscalePixelData[r],t[4*r+3]=255;return new ImageData(t,e.width,e.height)},this.grayscalePixelData=[];for(var n=0;n<t.length;n+=4)this.grayscalePixelData.push(t[n]);this.width=r,this.height=a}return r.prototype.thinImage=function(){var r,a=!1;do{r=!1,a=!a;for(var e=1;e<this.height;e++)for(var n=1;n<this.width;n++)if(255===this.grayscalePixelData[n+e*this.width]){var i=this.numNeighbors(n,e);i<2||i>6||1===this.numTransitions(n,e)&&this.atLeastOneIsWhite(n,e,a?0:1)&&(this.toWhite.push(new t(n,e)),r=!0)}for(var h=0,o=this.toWhite;h<o.length;h++){var s=o[h];this.grayscalePixelData[s.x+s.y*this.width]=0}this.toWhite=[]}while(a||r)},r.prototype.numNeighbors=function(t,r){for(var a=0,e=0;e<this.nbrs.length-1;e++){var n=t+this.nbrs[e][0],i=r+this.nbrs[e][1];255===this.grayscalePixelData[n+i*this.width]&&a++}return a},r.prototype.numTransitions=function(t,r){for(var a=0,e=0;e<this.nbrs.length-1;e++){var n=t+this.nbrs[e][0],i=r+this.nbrs[e][1],h=t+this.nbrs[e+1][0],o=r+this.nbrs[e+1][1];0===this.grayscalePixelData[n+i*this.width]&&255===this.grayscalePixelData[h+o*this.width]&&a++}return a},r.prototype.atLeastOneIsWhite=function(t,r,a){for(var e=this.nbrGroups[a],n=0,i=0;i<2;i++)for(var h=0,o=e[i];h<o.length;h++){var s=o[h],l=this.nbrs[s];if(0===this.grayscalePixelData[t+l[0]+(r+l[1])*this.width]){n++;break}}return n>1},r}(),a=function(t,r,a){if(a||2===arguments.length)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return t.concat(e||Array.prototype.slice.call(r))},e=document.getElementById("canvas"),n=[];e.addEventListener("click",(function(t){var r,a,i,o,s=(r=e,a=t.clientX,i=t.clientY,o=r.getBoundingClientRect(),{x:a-o.left,y:i-o.top});n.length<2?n.push(s):n=[s],h()}));var i=new Image;function h(){var t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,e.width,e.height),t.drawImage(i,0,0),e.width=i.width,e.height=i.height;var h=e.width,l=e.height;t.drawImage(i,0,0);var g=t.getImageData(0,0,e.width,e.height),c=new ImageData(new Uint8ClampedArray(g.data),g.width,g.height),d=function(t){for(var r=t.data,a=0;a<r.length;a+=4){var e=.299*r[a]+.587*r[a+1]+.114*r[a+2];r[a]=r[a+1]=r[a+2]=e}return t}(g),y=function(t,r,a){for(var e=t,n=0;n<a;n++)e=o(e,r);return e}(s(v(function(t,r){for(var a=t.data,e=0;e<a.length;e+=4){var n=.299*a[e]+.587*a[e+1]+.114*a[e+2];a[e]=a[e+1]=a[e+2]=n>r?0:255}return t}(d,100),[[1,1,1],[1,1,1],[1,1,1]]),[[1,1,1],[1,1,1],[1,1,1]]),[[1,1,1],[1,1,1],[1,1,1]],2),x=new r(y.data,h,l);x.thinImage();var p=x.data();t.putImageData(c,0,0);var w=n;if(2===w.length){var m=w[0],b=w[1],D=function(t,r,a){for(var e=t.width,n=t.height,i=[],h=0;h<t.data.length;h+=4)i.push(t.data[h]);var o=new Float32Array(e*n),s=new Array(e*n).fill(null);o.fill(1/0);var l=new Set;function f(t){for(var r=[],a=-t;a<=t;a++)for(var e=-t;e<=t;e++)0===a&&0===e||r.push({x:a,y:e});return r}var v=f(1);function g(t,r,a){for(var e=[],n=r;null!==t[n.x+n.y*a];){e.push(n);var i=t[n.x+n.y*a];n={x:i.x,y:i.y}}return e.push(n),e.reverse()}o[r.x+r.y*e]=0,l.add({x:r.x,y:r.y});for(;l.size>0;){var c=Array.from(l).reduce((function(t,r){var a=r.x,n=r.y;return o[a+n*e]<o[t.x+t.y*e]?r:t}));l.delete(c);var d=[c.x,c.y],y=d[0],x=d[1];if(y===a.x&&x===a.y)return g(s,a,e);for(var p=0,w=v;p<w.length;p++){var m=w[p],b=y+m.x,D=x+m.y;if(u(b,D,e,n)){var I=i[b+D*e],P=o[y+x*e]+(255-I);P<o[b+D*e]&&(o[b+D*e]=P,s[b+D*e]={x:y,y:x},l.add({x:b,y:D}))}}}return[]}(p,f(p,m),f(p,b));D.length&&function(t,r){var a=t.getContext("2d");a.beginPath(),a.moveTo(r[0].x,r[0].y);for(var e=1;e<r.length;e++)a.lineTo(r[e].x,r[e].y);a.strokeStyle="blue",a.lineWidth=1.5,a.stroke()}(e,a(a([m],D,!0),[b],!1))}}function o(t,r){for(var a=t.width,e=t.height,n=t.data,i=new Uint8ClampedArray(n.length),h=r.length,o=r[0].length,s=Math.floor(o/2),l=Math.floor(h/2),f=0;f<e;f++)for(var u=0;u<a;u++){for(var v=255,g=255,c=255,d=!1,y=-l;y<=l;y++)for(var x=-s;x<=s;x++){var p=u+x,w=f+y;if(1===r[y+l][x+s]&&p>=0&&p<a&&w>=0&&w<e){var m=4*(w*a+p);v=Math.min(v,n[m]),g=Math.min(g,n[m+1]),c=Math.min(c,n[m+2]),d=!0}}var b=4*(f*a+u);d&&(i[b]=v,i[b+1]=g,i[b+2]=c),i[b+3]=n[b+3]}return new ImageData(i,a,e)}i.crossOrigin="*",i.src="./public/xuong.jpg",i.onload=h;var s=function(t,r){return o(l(t,r),r)};function l(t,r){for(var a=t.width,e=t.height,n=t.data,i=new Uint8ClampedArray(n.length),h=r.length,o=r[0].length,s=Math.floor(o/2),l=Math.floor(h/2),f=0;f<e;f++)for(var u=0;u<a;u++){for(var v=0,g=0,c=0,d=!1,y=-l;y<=l;y++)for(var x=-s;x<=s;x++){var p=u+x,w=f+y;if(p>=0&&p<a&&w>=0&&w<e&&1===r[y+l][x+s]){var m=4*(w*a+p);v=Math.max(v,n[m]),g=Math.max(g,n[m+1]),c=Math.max(c,n[m+2]),d=!0}}var b=4*(f*a+u);d&&(i[b]=v,i[b+1]=g,i[b+2]=c),i[b+3]=n[b+3]}return new ImageData(i,a,e)}var f=function(t,r){for(var a=t.data,e=t.width,n=t.height,i=null,h=1/0,o=0;o<n;o++)for(var s=0;s<e;s++){if(255===a[4*(o*e+s)]){var l=Math.sqrt(Math.pow(r.x-s,2)+Math.pow(r.y-o,2));l<h&&(h=l,i={x:s,y:o})}}return i};function u(t,r,a,e){return t>=0&&t<a&&r>=0&&r<e}var v=function(t,r){return l(o(t,r),r)};return{}})()));
//# sourceMappingURL=khoadev.min.js.map